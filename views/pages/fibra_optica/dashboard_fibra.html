<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard - Fibra Óptica</title>
    <!-- Inclua aqui seus links de CSS comuns -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
    />
    <link rel="stylesheet" href="/static/css/style.css" />
  </head>
  <body>
    <div class="page-wrapper">
      <%- include('../../partials/sidebar.html') %>
      <main class="main-content">
        <%- include('../../partials/header.html', { user: user }) %>
        <div class="container-fluid mt-4">
          <div class="card">
            <div class="card-header">
              <h4 class="mb-0">
                <i class="fa-solid fa-network-wired me-2"></i>Módulo de Fibra
                Óptica
              </h4>
            </div>
            <div class="card-body">
              <div class="row">
                <!-- Card: Registrar Novo Projeto -->
                <div class="col-xl-3 col-md-6 mb-4">
                  <div
                    class="dashboard-card card-hover h-100"
                    data-url="/registro_projeto_fibra"
                    tabindex="0"
                    role="button"
                  >
                    <div class="card-body text-center">
                      <div class="icon-circle bg-primary mb-3">
                        <i class="fa-solid fa-file-signature fa-2x"></i>
                      </div>
                      <h5 class="card-title">Registrar Novo Projeto</h5>
                      <p class="card-text">
                        Crie uma nova ordem de serviço de fibra óptica.
                      </p>
                    </div>
                  </div>
                </div>

                <!-- Card: Projetos em Andamento -->
                <div class="col-xl-3 col-md-6 mb-4">
                  <div
                    class="dashboard-card card-hover h-100"
                    data-url="/projetos_fibra_andamento"
                    tabindex="0"
                    role="button"
                  >
                    <div class="card-body text-center">
                      <div class="icon-circle bg-info mb-3">
                        <i class="fa-solid fa-person-digging fa-2x"></i>
                      </div>
                      <h5 class="card-title">Projetos em Andamento</h5>
                      <p class="card-text">
                        Acompanhe os serviços que estão em execução.
                      </p>
                    </div>
                  </div>
                </div>

                <!-- Card: Projetos Concluídos -->
                <div class="col-xl-3 col-md-6 mb-4">
                  <div
                    class="dashboard-card card-hover h-100"
                    data-url="/projetos_fibra_concluidos"
                    tabindex="0"
                    role="button"
                  >
                    <div class="card-body text-center">
                      <div class="icon-circle bg-success mb-3">
                        <i class="fa-solid fa-flag-checkered fa-2x"></i>
                      </div>
                      <h5 class="card-title">Projetos Concluídos</h5>
                      <p class="card-text">
                        Consulte o histórico de serviços finalizados.
                      </p>
                    </div>
                  </div>
                </div>

                <!-- Card: Coletar Pontos no Mapa -->
                <div class="col-xl-3 col-md-6 mb-4">
                  <div
                    class="dashboard-card card-hover h-100"
                    data-url="/mapa_fibra"
                    tabindex="0"
                    role="button"
                  >
                    <div class="card-body text-center">
                      <div class="icon-circle bg-secondary mb-3">
                        <i class="fa-solid fa-map-pin fa-2x"></i>
                      </div>
                      <h5 class="card-title">Coletar Pontos no Mapa</h5>
                      <p class="card-text">
                        Registre novas coordenadas de pontos de fibra.
                      </p>
                    </div>
                  </div>
                </div>

                <!-- Card: Visualizar Mapa Completo -->
                <div class="col-xl-3 col-md-6 mb-4">
                  <div
                    class="dashboard-card card-hover h-100"
                    data-url="/visualizacao_mapa_fibra"
                    tabindex="0"
                    role="button"
                  >
                    <div class="card-body text-center">
                      <div class="icon-circle bg-dark mb-3">
                        <i class="fa-solid fa-map-location-dot fa-2x"></i>
                      </div>
                      <h5 class="card-title">Visualizar Mapa Completo</h5>
                      <p class="card-text">
                        Veja todos os pontos coletados no mapa interativo.
                      </p>
                    </div>
                  </div>
                </div>

                <!-- ================================================== -->
                <!-- NOVO CARD ADICIONADO AQUI -->
                <!-- Visível apenas para usuários com nível >= 4 -->
                <!-- ================================================== -->
                <% if (user.nivel >= 4) { %>
                <div class="col-xl-3 col-md-6 mb-4">
                  <div
                    class="dashboard-card card-hover h-100"
                    data-url="/gerenciar-pontos-fibra"
                    tabindex="0"
                    role="button"
                  >
                    <div class="card-body text-center">
                      <div class="icon-circle bg-warning mb-3">
                        <i class="fa-solid fa-table-list fa-2x"></i>
                      </div>
                      <h5 class="card-title">Gerenciar Pontos Coletados</h5>
                      <p class="card-text">
                        Visualize, edite ou exclua os pontos já registrados.
                      </p>
                    </div>
                  </div>
                </div>
                <% } %>
              </div>
            </div>
          </div>
        </div>
        <%- include('../../partials/footer.html') %>
      </main>
    </div>

    <!-- Inclua aqui seus scripts JS comuns -->
    <script src="https://code.jquery.com/jquery-3.7.0.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/static/js/toasts.js"></script>
    <!-- Script que faz os cards serem clicáveis -->
    <script src="/scripts/dashboard_card_handler.js"></script>
  </body>
</html>
